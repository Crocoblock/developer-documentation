# Booking List in the WooCommerce My Account Page

Цей розділ містить огляд функціональності, доступної для виводу списку бронювань на сторінці акаунту WooCommerce.

Ця функціональність буде працювати в не залежності від методу бронювання ( Booking Mode - WooCommerce Based ) та увімкнутої
інтеграції ( Booking Mode - Plain та WooCommerce Integration ). Тобто якщо на сайті активовано плагіни WooCommerce та
JetBooking, то на сторінці акаунту буде показаний додатковий пункт меню, по якому можна перейти на ендпоінт списку бронювань.

![WooCommerce my account booking lists](/06-jet-booking/03-features/01-booking-list-in-wc-my-account-page/assets/wc-my-account-booking-lists.png "Списки бронювань на сторінці акаунту WooCommerce")

Ендпоінт буде мати назву `jet-bookings`, але за необхідності його можна буде змінити за допомогою хука на щось інше в залежності 
від необхідності:

```php
// Зміна назви ендпоінту.
add_filter( 'jet-booking/wc-integration/myaccount/endpoint', function() {
	return 'bookings';
} );
```

> Поточна функціональність буде коректно працювати лише для бронювань створених після оновлення на версію плагіну 3.3.0.
> Бронювання які вже створенні не будуть автоматично синхронізовані з цією функціональністю. Можливості синхронізації будуть 
> лише за допомогою кастомного коду, кожен окремий випадок може бути унікальним і лише якщо передбачено якісь данні які зможуть 
> бути використанні для синхронізації бронювань та користувачів (створені додаткові колонки БД в яких зберігається данні користувачів,
> по типу електронної пошти, телефону чи ідентифікатора користувача).

Для цієї функціональності було також додано в таблицю бази даних додаткову колонку для ідентифікатора користувача `user_id`.
Ця колонка автоматично додасться до таблиці після оновлення плагіну. Для нових сайтів вона також буде додаватись при створенні нових
таблиць БД.

Бронювання будуть ділитись на 3 типи, вже які відбулись, ті які заплановані на сьогодні та що будуть в майбутньому. Данні 
які виводяться в цих таблицях відповідають даним таблиці бронювань адміністративної панелі (не виводиться лише юніти) та 
сортуватись таким самим чином без можливості фільтрації.

За замовчуванням для кожної з таблиць на одній сторінці буде виводитись по 10 бронювань. Цей параметр можна буде змінити
за допомогою хука:

```php
// Зміна кількості бронювань на сторінці.
add_filter( 'jet-booking/wc-integration/myaccount/bookings-per-page', function() {
	return 5;
} );
```

У випадку якщо кількість бронювань перевищує зазначену кількість, додатково до кожної таблиці додано пагінацію, за допомогою
якої можна буде переглянути всі бронювання. 

> Важливий нюанс, кожна пагінація в не залежності до якої таблиці вона приставлена перемикає сторінку ендпоінта і тим самим
> всі таблиці переходять на нову сторінку. 

В колонці `Instance` пост типу бронювань буде виведено назву заброньованого посту з посиланням, яке вас переведе на сторінку
цього посту.

Колонка `Order` буде містити в собі ідентифікатор замовлення. Якщо це замовлення створено за допомогою WooCommerce тоді воно буде
представлено у вигляді посилання, яке переведе на відповідне замовлення на сторінці акаунта.

Для колонок з датами заїзду та виїзду використовується форматування дати яке можна задати в налаштуваннях сайту 
**Settings** -> **General** -> **Date Format**.

Остання колонка зарезервована для кнопки скасування бронювання, яка буде доступна у випадку якщо відповідне налаштування увімкнено
та бронювання відповідає всім умовам для можливості скасування та відповідного зображення кнопки для нього. Більш детально про цю 
функціональність можна дізнатись за [посиланням](/06-jet-booking/03-features/02-booking-cancellation).